<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <link href="../css/app.54882b13.css" rel=stylesheet>
   <script src="../js/p5.min.js" type="text/javascript"></script>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Kanad Chakrabarti" />
  <meta name="description" content="Giorgio Agamben, AGI, artificial intelligence, J.G. Ballard, Seth Baum, Ian Bogost, Nick Bostrom, Alfie Bown, Rosi Braidotti, Benjamin Bratton, David Chalmers, Death Stranding, Discord, emulation, Epic Games, existential risk, Mark Fisher, Alexander Galloway, GNU, Robin Hanson, Yuk Hui, IoT, Jesper Juul, inhuman, Nick Land, Stanislaw Lem, Metaverse, Reza Negarestani, No Man's Sky, Philips Hue, posthuman, recursion, Anders Sandberg, Carl Schmitt, simulation, singleton, superintelligence, Tim Sweeney, Tencent, transhuman, Unreal Engine, McKenzie Wark, Paul Virilio, virtual machines, WBE, WeChat, Peter Wolfendale, Eliezer Yudkowsky"/>
  <title>The Game Engine as Transhumanist Sandbox</title>



</head>
<body class="essai">
  <div class="essai">
    <div class="essaitop">
  <noscript>A project by U. Kanad Chakrabarti.</noscript>


  <!-- Utility JS and d3 package (v4) which has good time formatting. Used to put time on screen.  The d3-selection needed for black scholes shite -->
  <!-- <script src="../js/d3.min.js"></script> -->
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src= "https://d3js.org/d3-selection.v1.min.js"></script>

  <script src="../js/surface3d.js"></script>
    <!-- <div data-v-3c4263c1="" class="stars-wrapper">
            <div data-v-3c4263c1="" class="stars"></div>
        </div> -->
        <!---->
        <div data-v-3c4263c1="" id="nav" class="z-10 transition sticky top-0 flex justify-between uppercase py-3 px-3 md:px-6">
            <div data-v-3c4263c1="" class="w-1/8"><a data-v-3c4263c1="" href="../index.html" class="hidden md:inline router-link-active"><p class="dot"></p></a><a data-v-3c4263c1="" href="../index.html" class="md:hidden"><p class="dot"></p></a></div>
            
            <div data-v-9311eee0="" class="flex left-0 right-0 justify-center z-20"><div data-v-9311eee0="" class="border-current serif uppercase text-sm border flex items-center mb-4 uppercase tracking-wider"><span data-v-9311eee0="" id="splash2"></span></div></div>

            <div data-v-3c4263c2="" class="w-1/8 text-right"></div>
        </div>

<div data-v-10799180="" class="mx-auto max-w-3xl mt-24 text-center px-6 has-annotations"><h3 data-v-10799180="" class="serif text-sm">U. Kanad Chakrabarti</h3><h1 data-v-10799180="" class="uppercase">Leviathan<span class="citation annotation-counter annotation-counter-inner" data-tippy-content="<center><b>Tags</b></center><br> Giorgio Agamben, AGI, artificial intelligence, J.G. Ballard, Seth Baum, Ian Bogost, Nick Bostrom, Alfie Bown, Rosi Braidotti, Benjamin Bratton, David Chalmers, Death Stranding, Discord, emulation, Epic Games, existential risk, Mark Fisher, Alexander Galloway, GNU, Robin Hanson, Yuk Hui, IoT, Jesper Juul, inhuman, Nick Land, Stanislaw Lem, Metaverse, Reza Negarestani, No Man's Sky, Philips Hue, posthuman, recursion, Anders Sandberg, Carl Schmitt, simulation, singleton, superintelligence, Tim Sweeney, Tencent, transhuman, Unreal Engine, McKenzie Wark, Paul Virilio, virtual machines, WBE, WeChat, Peter Wolfendale, Eliezer Yudkowsky">&bull;</span>  Panoptes<span class="citation annotation-counter annotation-counter-inner" data-tippy-content="<b><center>Summary</center></b><br><p>Gaming, and game engines, as runway to an emulation society, connection via the Metaverse.  A heady fricasse of trendy name-checks and a lip-smacking foretaste of humanity's extinction: surveilance non-stop, eternal <em>ennui</em>, affective addiction. All under the gracious, loving eyes of the capital singleton.</p>">  TLDR;
   </span></h1><!----></div>
  
<!-- anchor for text stuff -->
   

   <p class='essai_control'>
    <input id="submit" type="button" class="submit bg-gray-600 text-green" name="submit" value='۱' onclick="draw_text()">

    <input id="submit2" type="button" class="submit bg-gray-600 text-green" name="submit2" value='۲ ' onclick="refresh()">

    <input id="submit3" type="button" class="submit bg-gray-600 text-green" name="submit3" value='۳' onclick="calculate()">

    <input id="submit5" type="button" class="submit bg-gray-600 text-green" name="submit5" value='۵' onclick="calculate()">

    <input id="submit7" type="button" class="submit bg-gray-600 text-green" name="submit7" value='۷' onclick="calculate()">

   </p>


  


<div data-v-fb2bae8a="" data-v-10799180="" id="optval" class='right'></div>







<div class='bs_out_container'>
  

  

<div class='bs'>
  <p class='bs'>Option params<p id="params" class="bs">

    <div class="slidecontainer">
  <input type="range" min="0.01" max="10.0" value="1" step="any" class="gslider" id="n3" name="n3" onchange="calculate()"><label class="bs">t</label>

  <input type="range" min="0" max="100" value="50" step="any" class="gslider" id="n2" name="n2" onchange="calculate()"><label class="bs">S</label>

  <input type="range" min="0" max="100" value="50" step="any"  class="gslider" id="n1" name="n1" onchange="calculate()"><label class="bs">K</label>

  <input type="range" min="0.01" max="1" value="0.2" step="any"  class="gslider" id="n4" name="n4" onchange="calculate()"><label class="bs">&sigma;</label>

  <input type="range" min="0.0001" max="0.30" value="0.02" step="any"  class="gslider" id="n5" name="n5" onchange="calculate()"><label class="bs">r<sub>f</sub></label>

  <input type="range" min="0.0001" max="0.30" value="0.02" step="any"  class="gslider" id="n6" name="n6" onchange="calculate()"><label class="bs">r<sub>d</sub></label>

</div><br>


  <script>
    let s = [], 
      outstr = '',
      labels = ['','K','S','t','&sigma;','r<sub>f</sub>','r<sub>d</sub>'], 
      o = document.getElementById("params");; //elements in GUI and output tags
    
    let num_opt_params = 6; //Note param 0 is empty (there is no n0 in the page)
    let t;
    for(i=1;i <= num_opt_params;i++) {
      s[i] = document.getElementById("n"+i);
      t = +(s[i].value);
      outstr = outstr + "<br>" + labels[i] +" "+ t.toFixed(2);  
      o.innerHTML = outstr;

      s[i].oninput = function() {
        let outstrp = '';
        for(j=1;j<= num_opt_params;j++) {
          t = +(s[j].value);
          outstrp = outstrp + "<br>" + labels[j] +"       "+ t.toFixed(2);  
          o.innerHTML = outstrp;
      }

      calculate();
      document.getElementById('out_val').innerHTML = 'Call:   ' + option.p_c.toFixed(2)
        + '<br><br><br><br>' + 'Put:   ' + option.p_p.toFixed(2);
    }
  }
  </script>




<div class='bs'><p class='opt_out' id="out_val"></p></div>
</div>

<div id='delval'></div>

<div id='delspotvol'></div>

<div data-v-10799180="" id='text_base' ></div>




<div id="delvolt"></div>

<div id="gamspotvol"></div>








<script src="https://unpkg.com/@popperjs/core@2/dist/umd/popper.min.js"></script>
<script src="https://unpkg.com/tippy.js@6/dist/tippy-bundle.umd.js"></script>
<script>tippy('[data-tippy-content]',
{
          theme: 'cosmism',
          arrow: false,
          allowHTML: true
        });
</script>

  <script src="../js/ukcutil.js"></script> 

  <script>
    //Update time just once
    updt("splash2");
  </script>


<!-- Stuff added 30 Nov to make transhumanism text snippets -->
<script>
  let line = 0; //Starting line of the text reading
  let textcont = ''; //Holds all the HTML content


  maketext = function() {
    /*Loads a text file*/
    let fn;
    fn = "essai.html";
    textcont = loadStrings(fn);    
    }

  draw_text = function() {
    if(textcont == '') {maketext();}
    let t = document.createElement('DIV');
    t.innerHTML = textcont[line];
    document.getElementById('text_base').appendChild(t); 


    line++; if(line > textcont.length) {console.log("draw_text: End of file reached\n");}
  }  


function preload() {
  maketext();
}

function setup() {
  let navh = 73;
  let dpr = 0;
  let canvas = createCanvas(windowWidth,windowHeight - navh,WEBGL);
  canvas.id('text_canvas');
  canvas.parent('text_base');
  dpr = window.devicePixelRatio;
  colorMode(HSB);
}

function draw() {

}

</script>


<!-- Stuff added 19 Nov to make option graph overlay -->
  
  <script>
  var yaw=0.5,pitch=0.5, width=400, height=400, drag=false;

  function dataFromFormular(func){
    var output=[];
    for(var x=-20;x<20;x++){
      var f0=[];            
      output.push(f0);
      for(var y=-20;y<20;y++){
          f0.push(func(x,y));
      }
    }
    return output;
  }

  /*Overload above with abcissa range rather than hardwired range*/
  function dataFromFormular(func,min_x,max_x,min_y,max_y){
    //Use 100 as increment for graph/dataset
    x_incr = (max_x - min_x)/100;
    y_incr = (max_y - min_y)/100;
    var output=[];
    for(var i=min_x;i<max_x;i += x_incr){
      var f0=[];            
      output.push(f0);
      for(var j=min_y;j<max_y;j += y_incr){
          f0.push(func(i,j));
      }
    }
    return output;
  }  


  /*Global option object*/
  let option = {
    S: 250,
    K: 250,
    t: 1,
    r_f: .05,
    r_d: .06,
    vol: .2,
    p_c: 0,
    p_p: 0,
    delta: 0,
    gamma: 0,
    vega: 0,
    theta: 0,
    rho: 0,

    call: function() {
      return Math.max(0,this.black_scholes(true,this.S,this.K,this.r_f,this.vol,this.t));
    },


    put: function() {
      return Math.max(0,this.black_scholes(false,this.S,this.K,this.r_f,this.vol,this.t));
    },

    opt_val_S_t: function(spot,time) {
      let tmp = Math.max(0,this.black_scholes(true,spot,this.K,this.r_f,this.vol,time));
      //console.log("option result==> ",spot,this.K,this.r_f,time,this.vol,tmp);
      
      return tmp;
    },

    //Delta as f(S,t), the object-level delta is populated on each call of the function & also returned
    opt_delta_S_t: function(spot,time) {
      let tmp = Math.max(0,this.black_scholes(true,spot,this.K,this.r_f,this.vol,time));
      //console.log("delta==> ",spot,this.K,this.r_f,time,this.vol,this.delta);
      return this.delta;
    },

    opt_delta_S_vol: function(spot,vol) {
      let tmp = Math.max(0,this.black_scholes(true,spot,this.K,this.r_f,vol,this.t));
      return this.delta;
    },


    opt_delta_vol_t: function(vol,time) {
      let tmp = Math.max(0,this.black_scholes(true,this.S,this.K,this.r_f,vol,time));
      return this.delta;
    },

    opt_gamma_S_vol: function(spot,vol) {
      let tmp = Math.max(0,this.black_scholes(true,spot,this.K,this.r_f,vol,this.t));
      //console.log("gamma==> ",spot,this.K,this.r_f,this.t,vol,this.gamma);
      let gammax = 1000, gammin = -1000;
      if(this.gamma < 0) {
        return Math.max(gammin,this.gamma);
      } else {
        return Math.min(gammax,this.gamma); 
      }
    },



    black_scholes: function(call,S,X,r,v,t) { 
      // call = Boolean (to calc call, call=True, put: call=false)
      // S = stock prics, X = strike price, r = no-risk interest rate
      // v = volitility (1 std dev of S for (1 yr? 1 month?, you pick)
      // t = time to maturity

      // define some temp vars, to minimize function calls
      var sqt = Math.sqrt(t);
        var Nd2;  //N(d2), used often
        var nd1;  //n(d1), also used often
        var ert;  //e(-rt), ditto
        var del;  //The delta of the option

        d1 = (Math.log(S/X) + r*t)/(v*sqt) + 0.5*(v*sqt);
        d2 = d1 - (v*sqt);

        ert = Math.exp(-r*t);
        nd1 = this.ndist(d1);

        if (call) {
          del = this.N(d1);
          Nd2 = this.N(d2);
          p_c = S*del - X*ert * Nd2;
        } else { //put
          del = -this.N(-d1);
          Nd2 = -this.N(-d2);
          p_p = S*del - X*ert * Nd2;

        }

        this.delta = del;
        this.gamma = nd1/(S*v*sqt);
        this.vega = S*sqt*nd1;
        this.theta = -(S*v*nd1)/(2*sqt) - r*X*ert*Nd2;
        this.rho = X*t*ert*Nd2;

        return ( S*del-X*ert *Nd2);

      },


      ndist: function(z) {
        return (1.0/(Math.sqrt(2*Math.PI)))*Math.exp(-0.5*z);
        //??  Math.exp(-0.5*z*z)
      },
 
      N: function(z) {
        b1 =  0.31938153;
        b2 = -0.356563782;
        b3 =  1.781477937;
        b4 = -1.821255978;
        b5 =  1.330274429;
        p  =  0.2316419;
        c2 =  0.3989423;
        a=Math.abs(z);
        if (a>6.0) {return 1.0;} 
        t = 1.0/(1.0+a*p);
        b = c2*Math.exp((-z)*(z/2.0));
        n = ((((b5*t+b4)*t+b3)*t+b2)*t+b1)*t;
        n = 1.0-b*n;
        if (z < 0.0) {n = 1.0 - n;}
        return n;
      }
};

let calculate = function() {
    option.S = document.getElementById("n2").value;
    option.K = document.getElementById("n1").value;
    option.t = document.getElementById("n3").value;
    option.r_f = document.getElementById("n5").value;
    option.r_d = document.getElementById("n6").value;
    option.vol = document.getElementById("n4").value;

    option.p_c = option.call();
    option.p_p = option.put();

    console.log("option result==> ",option.S,option.K,option.t,option.vol,option.call(),option.put());
  }

/*Note in Option value, we floor time at 0.01 to avoid NaN*/
let surfaces=[
    {
      name: 'Option value',
      data: dataFromFormular(function(x,y){
          return option.opt_val_S_t(x,y);
        },0.01,option.S*2,0.01,option.t)
    },
    {
      name: 'Delta as f(S,t)',
      data: dataFromFormular(function(x,y){
        return option.opt_delta_S_t(x,y);
      },0.01,option.S*2,0.01,option.t)
    },
    {
      name: 'Delta as f(S,vol)',
      data: dataFromFormular(function(x,y){
        return option.opt_delta_S_vol(x,y);
      },0.01,option.S*2,0.05,1.0)
    },
    {
      name: 'Delta as f(vol,t)',
      data: dataFromFormular(function(x,y){
        return option.opt_delta_vol_t(x,y);
      },0.05,1.0,0.01,option.t)
    },
    {
      name: 'Gamma as f(S,vol)',
      data: dataFromFormular(function(x,y){
        return option.opt_gamma_S_vol(x,y);
      },0.05,option.S*2,0.05,1.0)
    }
  ];
  //var selected=surfaces[0];

  /*For setting scale of data, axes*/
  /*
  let scala = d3.scaleLinear()
    .domain([0.01,option.t])
    .range([0.0,1.0]);
  */


  var ul=d3.select('#optval')
           .insert('ul');
  var svg=d3.select('#optval')
          .append('svg')
            .attr('height',height)
            .attr('width',width);

  /*
  svg.append("g")
    .attr("transform", "translate(200," + 100 + ")")
    .call(d3.axisBottom(scala));          
  */

  var group = svg.append("g")       
    .attr('transform','translate(-100,-100)');


  var md=group.data([surfaces[0].data])
    .surface3D(width,height)
      .surfaceHeight(function(d){ 
        return d;
      }).surfaceColor(function(d){
        var c=d3.hsl((d+100), 0.6, 0.5).rgb();
        return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
      });


/*
      svg.transition()
      .duration(2000)
      .attr('rotation','rotate(360)');;
*/
   


  let svg_del=d3.select('#delval')
          .append('svg')
            .attr('height',height)
            .attr('width',width)
            .attr('transform','translate('+document.body.clientWidth/3.5+',0)');    

  let group_del = svg_del.append('g')
        .attr('transform','translate(-100,-100)');

  let md_delta = group_del.data([surfaces[1].data])
    .surface3D(width,height)
      .surfaceHeight(function(d){ 
        return d * 100;
      }).surfaceColor(function(d){
        var c=d3.hsl((d+10), 0.6, 0.5).rgb();
        return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
      }); 


  let svg_del_S_vol=d3.select('#delspotvol')
          .append('svg')
            .attr('height',height)
            .attr('width',width)
            .attr('transform','translate('+document.body.clientWidth/10+',0)');    

  let group_del_S_vol = svg_del_S_vol.append('g')
        .attr('transform','translate(-100,-100)');

  let md_delta_S_vol = group_del_S_vol.data([surfaces[2].data])
    .surface3D(width,height)
      .surfaceHeight(function(d){ 
        return d * 100;
      }).surfaceColor(function(d){
        var c=d3.hsl((d+200), 0.6, 0.5).rgb();
        return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
      }); 


  let svg_del_vol_t=d3.select('#delvolt')
          .append('svg')
            .attr('height',height)
            .attr('width',width)
            .attr('transform','translate('+document.body.clientWidth/2.5+',0)');    

  let group_del_vol_t = svg_del_vol_t.append('g')
        .attr('transform','translate(-100,-100)');

  let md_delta_vol_t = group_del_vol_t.data([surfaces[3].data])
    .surface3D(width,height)
      .surfaceHeight(function(d){ 
        return d * 100;
      }).surfaceColor(function(d){
        var c=d3.hsl((d+250), 0.6, 0.5).rgb();
        return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
      }); 

  let svg_gamma_S_vol=d3.select('#gamspotvol')
          .append('svg')
            .attr('height',height)
            .attr('width',width);    

  let group_gamma_S_vol = svg_gamma_S_vol.append('g')
        .attr('transform','translate(-100,-100)');

  let md_gamma_S_vol = group_gamma_S_vol.data([surfaces[4].data])
    .surface3D(width,height)
      .surfaceHeight(function(d){ 
        return d;
      }).surfaceColor(function(d){
        var c=d3.hsl(d, 0.3, 0.8).rgb();
        return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
      }); 

  /*Once everythign loaded, then do a refresh to draw automatically*/
  refresh = function() {
    let datmp = new Date();
    
    md.turntable(Math.sin(datmp.getSeconds()),Math.cos(datmp.getSeconds()));
    md_delta.turntable(Math.sin(datmp.getSeconds()),Math.cos(datmp.getSeconds()));
    md_delta_S_vol.turntable(Math.sin(datmp.getSeconds()),Math.cos(datmp.getSeconds()));
    md_delta_vol_t.turntable(Math.sin(datmp.getSeconds()),Math.cos(datmp.getSeconds()));
    md_gamma_S_vol.turntable(Math.sin(datmp.getSeconds()),Math.cos(datmp.getSeconds()));
  }


  

/* This is needed to have name of dataset and ability to switch, doesn't work anyway*/
/*
  ul.selectAll('li')
    .data(surfaces)
      .enter().append('li')
        .html(function(d){
          return d.name
        }).on('mousedown',function(){
          md.data([d3.select(this).datum().data]).surface3D()
            .transition().duration(500)
            .surfaceHeight(function(d){
              return d;
            }).surfaceColor(function(d){
              var c=d3.hsl((d+100), 0.6, 0.5).rgb();
              return "rgb("+parseInt(c.r)+","+parseInt(c.g)+","+parseInt(c.b)+")";
            });
        });
*/



  svg.on('mousemove',function() {
    refresh();
  });

  svg_del.on('mousemove',function() {
    refresh();
  });


  svg_del_S_vol.on('mousemove',function() {
    refresh();
  });


  svg_del_vol_t.on('mousemove',function() {
    refresh();
  });

  svg_gamma_S_vol.on('mousemove',function() {
    refresh();
  });

/*
  setInterval(function() {//console.log("Refresh now "); 
    refresh();},3000);
    */
  
  </script>
</div>
</div>
</body>
</html>
